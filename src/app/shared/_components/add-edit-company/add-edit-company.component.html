<form [formGroup]="form" class="companyform" *ngIf="form">
  <div class="formWrapper">
    <!-- display basic details-->
    <div class="" *ngIf="edit && editSection !== 1 && form.value.id">
      <div class="form-group">
        <label class="addheader h5 w-100">Basic Details</label>
        <div class="addedForm form-row no-margin position-relative">
          <div>
            <i
              class="fa fa-pencil action-icon sectionactionpanel"
              (click)="editSectionEnable(1)"
            >
            </i>
            <!-- <img src="./assets/images/icon-edit.png" class="action-icon sectionactionpanel" (click)="editSectionEnable(1)"/> -->
          </div>

          <div
            class="col-md-12 row no-margin"
            *ngIf="editDetails.value.comptype !== 'EMPLOYEE'"
          >
            <label class="font-weight-light col-md-3 pl-0">
              Legal Name <span class="float-right">:</span>
            </label>
            <div class="ml-2">{{ form.value.name }}</div>
            <!-- <input autocomplete="off" type="text" required name="legalname" formControlName="name" (blur)="assignDefaultName($event.target.value)" class="inputstyle form-control" placeholder="Enter Company Legal name"/> -->
          </div>
          <div
            class="col-md-12 row no-margin"
            *ngIf="editDetails.value.comptype === 'EMPLOYEE'"
          >
            <label class="font-weight-light col-md-3 pl-0">
              Employee Name <span class="float-right">:</span>
            </label>
            <div class="ml-2">{{ form.value.employeeName }}</div>
          </div>
          <div class="col-md-12 row no-margin" *ngIf="showCompleteView">
            <label class="font-weight-light col-md-3 pl-0">
              Parent Name <span class="float-right">:</span>
            </label>
            <div class="ml-2">
              {{
                form.value.parentlegalname ? form.value.parentlegalname : "N.A."
              }}
            </div>
            <!-- <app-type-ahead #parentname [value]="form.value.parentfriendlyname? form.value.parentfriendlyname: ''"  [search]="'dynamic'" [type]="'company'" (resultEmitter)="assignParent($event)"></app-type-ahead> -->
          </div>

          <div class="row no-margin col-md-12">
            <label class="font-weight-light col-md-3 pl-0">
              Short Name <span class="float-right">:</span>
            </label>
            <div class="ml-2">
              {{ form.value.friendlyname ? form.value.friendlyname : "N.A." }}
            </div>
            <!-- <input autocomplete="off" type="text" name="usedname" formControlName="friendlyname" class="inputstyle form-control" placeholder="Enter Friendly Name"/> -->
          </div>
          <div class="row no-margin col-md-12">
            <label class="font-weight-light mr-2 col-md-3 pl-0">
              Registration Country<span class="float-right">:</span>
            </label>
            <div>{{ form.value.registered.countryname }}</div>
          </div>
          <div class="row no-margin col-md-12" *ngIf="showCompleteView">
            <label class="font-weight-light col-md-3 pl-0">
              Carrier Type <span class="float-right">:</span>
            </label>
            <div class="ml-2">{{ form.value.comptype }}</div>
          </div>
          <div class="row no-margin col-md-12" *ngIf="showCompleteView">
            <label class="font-weight-light mr-2 col-md-3 pl-0">
              Group <span class="float-right">:</span></label
            >
            <div>{{ groupName ? groupName : "N.A." }}</div>
          </div>

          <div class="row no-margin col-md-12">
            <label class="font-weight-light mr-2 col-md-3 pl-0">
              Status <span class="float-right">:</span></label
            >
            <div>{{ form.value.isactive ? "Active" : "Inactive" }}</div>
          </div>
          <div class="row no-margin col-md-12">
            <label class="font-weight-light mr-2 col-md-3 pl-0">
              Partner Level <span class="float-right">:</span></label
            >
            <div>{{ form.value.partnerLevel }}</div>
          </div>
          <div class="row no-margin col-md-12" *ngIf="edit">
            <label class="font-weight-light mr-2 col-md-3 pl-0">
              {{
                ofac.company.length === 0
                  ? "OFAC Check Required"
                  : "OFAC Check Done"
              }}
              <span class="float-right">:</span>
            </label>
            <div *ngIf="ofac.company.length === 0">
              {{ form.value.ofacrequired ? "Yes" : "No" }}
            </div>
            <div *ngIf="ofac.company.length !== 0">Yes</div>
          </div>
          <div class="col-md-12" *ngIf="showCompleteView">
            <div class="row no-margin" *ngIf="form && form.value.aliases">
              <label class="font-weight-light col-md-3 pl-0"
                >Added Aliases
                <span class="float-right">:</span>
              </label>
              <div class="row no-gutters pl-2 col-md-9">
                <div
                  class="primary-color"
                  *ngFor="let alias of form.value.aliases; let i = index"
                >
                  <span class="secondary-color font-weight-bold" *ngIf="i !== 0"
                    >&nbsp; | &nbsp;
                  </span>
                  {{ alias }}
                  <!-- <div class="addedList">{{alias}}
                 <span class="delIcon" (click)="deleteAlias(alias)">
                   <img height="15px" src="./assets/images/cross.png"/>
                  </span>
               </div> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class=""
      *ngIf="edit && editSection !== 1 && form.value.id && showCompleteView"
    >
      <label class="addheader h5 w-100">SAP IDs</label>
      <div class="addedList pt-2" style="border-radius: 6px; margin-right: 0">
        <div class="col-md-12" *ngIf="showCompleteView">
          <div class="row no-margin" *ngIf="form && form.value.vendorsapid">
            <label class="font-weight-light col-md-4 pl-0"
              >Vendor SAP Id
              <span class="float-right">:</span>
            </label>
            <div class="row no-gutters pl-2 col-md-8">
              <div
                class="primary-color"
                *ngFor="let customid of form.value.vendorsapid; let i = index"
              >
                <span class="secondary-color font-weight-bold" *ngIf="i !== 0"
                  >&nbsp; | &nbsp;
                </span>
                {{ customid }}
                <!-- <div class="addedList">{{alias}}
                 <span class="delIcon" (click)="deleteAlias(alias)">
                   <img height="15px" src="./assets/images/cross.png"/>
                  </span>
               </div> -->
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-12" *ngIf="showCompleteView">
          <div class="row no-margin" *ngIf="form && form.value.customersapid">
            <label class="font-weight-light col-md-4 pl-0"
              >Customer SAP Id
              <span class="float-right">:</span>
            </label>
            <div class="row no-gutters pl-2 col-md-8">
              <div
                class="primary-color"
                *ngFor="let sapid of form.value.customersapid; let i = index"
              >
                <span class="secondary-color font-weight-bold" *ngIf="i !== 0"
                  >&nbsp; | &nbsp;
                </span>
                {{ sapid }}
                <!-- <div class="addedList">{{alias}}
                 <span class="delIcon" (click)="deleteAlias(alias)">
                   <img height="15px" src="./assets/images/cross.png"/>
                  </span>
               </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class=""
      *ngIf="edit && editSection !== 1 && form.value.id && showCompleteView"
    >
      <label class="addheader h5 w-100">Other Emails</label>
      <div
        class="addedList pt-2 defaultText"
        style="border-radius: 6px; margin-right: 0"
      >
        <div class="col-md-12" *ngIf="showCompleteView">
          <div class="row no-margin">
            <label class="font-weight-light col-md-4 pl-0"
              >Added Other Emails
              <span class="float-right">:</span>
            </label>
            <div class="row no-gutters pl-2 col-md-8">
              <div
                class="primary-color"
                *ngFor="let sapid of form.value.otherEmails; let i = index"
              >
                <span class="secondary-color font-weight-bold" *ngIf="i !== 0"
                  >&nbsp; | &nbsp;
                </span>
                {{ sapid }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class=""
      *ngIf="edit && editSection !== 1 && form.value.id && showCompleteView"
    >
      <label class="addheader h5 w-100">Other Phone Numbers</label>
      <div
        class="addedList pt-2 defaultText"
        style="border-radius: 6px; margin-right: 0"
      >
        <div class="col-md-12" *ngIf="showCompleteView">
          <div class="row no-margin">
            <label class="font-weight-light col-md-4 pl-0"
              >Added Other Phone Numbers
              <span class="float-right">:</span>
            </label>
            <div class="row no-gutters pl-2 col-md-8">
              <div
                class="primary-color"
                *ngFor="
                  let sapid of form.value.otherPhoneNumbers;
                  let i = index
                "
              >
                <span class="secondary-color font-weight-bold" *ngIf="i !== 0"
                  >&nbsp; | &nbsp;
                </span>
                {{ sapid }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class=""
      *ngIf="edit && editSection !== 1 && form.value.id && showCompleteView"
    >
      <label class="addheader h5 w-100">Account Manager</label>
      <div class="addedList pt-2" style="border-radius: 6px; margin-right: 0">
        <div class="col-md-12" *ngIf="showCompleteView">
          <div class="row no-margin">
            <label class="font-weight-light col-md-4 pl-0"
              >Added Account Manager
              <span class="float-right">:</span>
            </label>
            <div class="row no-gutters pl-2 col-md-8">
              <div
                class="primary-color"
                *ngFor="let sapid of form.value.accountManagers; let i = index"
              >
                <span class="secondary-color font-weight-bold" *ngIf="i !== 0"
                  >&nbsp; | &nbsp;
                </span>
                {{ sapid.fullName }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--  end of display basic details -->

    <div class="tab-container" *ngIf="!edit || editSection === 1">
      <div
        (click)="btnSwapper('basicDetails')"
        class="tab-item {{ btnTab === 'basicDetails' ? 'active' : '' }}"
      >
        Basic Details
      </div>
      <div
        (click)="btnSwapper('KYCDetails')"
        class="tab-item {{ btnTab === 'KYCDetails' ? 'active' : '' }}"
      >
        KYC Details
      </div>
    </div>

    <!-- aadhaar & pan  -->
    <div
      class="kyc-all"
      *ngIf="(!edit || editSection === 1) && btnTab === 'KYCDetails'"
    >
      <div class="label-btns">
        <button
          *ngIf="edit"
          [disabled]="!form.valid"
          class="float-right primarybtnstyle btn ml-2"
          (click)="save()"
        >
          Save
        </button>
        <button
          *ngIf="edit"
          type="reset"
          class="float-right secondarybtnstyle btn"
          (click)="closeEditSection(1)"
        >
          Cancel
        </button>
      </div>
      <!-- starting kycdoc -->
      <div
        *ngIf="
          btnTab === 'KYCDetails' &&
          edit &&
          editDetails.value.comptype === 'EMPLOYEE' &&
          editDetails.value.code.match(
            '^([0-9]{4}[0-9]{4}[0-9]{4}$)|([0-9]{4}s[0-9]{4}s[0-9]{4}$)|([0-9]{4}-[0-9]{4}-[0-9]{4}$)'
          )
        "
        class="kyc-doc &&"
      >
        <div>
          <app-document-list
            [commentList]="[]"
            [completedContract]="false"
            [viewType]="'company'"
            [aadhaarId]="editDetails.value.code"
          ></app-document-list>
        </div>
      </div>
      <!-- end of kyc doc -->

      <!-- start of kyc-info  -->

      <div
        class="kyc-info {{ kycEditSection ? 'border-form' : '' }} {{
          !editDetails.value.code.match(
            '^([0-9]{4}[0-9]{4}[0-9]{4}$)|([0-9]{4}s[0-9]{4}s[0-9]{4}$)|([0-9]{4}-[0-9]{4}-[0-9]{4}$)'
          ) || !edit
            ? 'w-100'
            : ''
        }}"
      >
        <div
          class="tab-container"
          *ngIf="
            (!edit || editSection === 1) &&
            btnTab === 'KYCDetails' &&
            kycEditSection === false
          "
        >
          <div
            (click)="childBtnSwapper('aadhaar')"
            class="tab-item {{ childBtnTab === 'aadhaar' ? 'active' : '' }}"
          >
            Aadhaar
          </div>
          <div
            (click)="childBtnSwapper('pan')"
            class="tab-item {{ childBtnTab === 'pan' ? 'active' : '' }}"
          >
            Pan
          </div>
          <div
            (click)="childBtnSwapper('GST')"
            class="tab-item {{ childBtnTab === 'GST' ? 'active' : '' }}"
          >
            GST
          </div>
          <div
            (click)="childBtnSwapper('Others')"
            class="tab-item {{ childBtnTab === 'Others' ? 'active' : '' }}"
          >
            Others
          </div>
        </div>
        <div
          class="addheader h5 w-100 kyc-sub-label"
          *ngIf="btnTab === 'KYCDetails'"
        >
          <div *ngIf="!kycEditSection && showCompleteView && edit">
            <i
              class="fa fa-pencil action-icon sectionactionpanel"
              (click)="kycEditSectionEnable(true)"
            >
            </i>
          </div>
          <div *ngIf="kycEditSection">
            <button
              *ngIf="edit"
              [disabled]="!form.valid"
              class="float-right primarybtnstyle btn ml-2"
              (click)="kycSave()"
              (click)="btnSwapper('basicDetails')"
            >
              Save
            </button>
            <button
              *ngIf="edit"
              type="reset"
              class="float-right secondarybtnstyle btn"
              (click)="kycEditSectionEnable(false)"
            >
              Cancel
            </button>
          </div>
        </div>
        <div
          class="form-row no-margin w-100"
          *ngIf="btnTab === 'KYCDetails' && childBtnTab === 'aadhaar'"
        >
          <div
            class="aadhaar-img"
            *ngIf="editDetails.value.aadhaar?.photo_link"
          >
            <img
              src="{{ editDetails.value.aadhaar?.photo_link }}"
              alt="aadhaar_photo"
            />
          </div>

          <div
            *ngIf="!kycEditSection && showCompleteView && edit"
            class="kyc-labels"
          >
            <p class="key">
              Aadhaar ID :
              <span class="value">{{
                editDetails.value.aadhaar?.aadhaarId
              }}</span>
            </p>
            <p class="key">
              Aadhaar Name :
              <span class="value">{{ editDetails.value.aadhaar?.name }}</span>
            </p>
            <p class="key">
              Aadhaar DOB :
              <span class="value"
                >{{ editDetails.value.aadhaar?.dob }}
                {{ editDetails.value.aadhaar?.dob ? "(YYYY-MM-DD)" : "" }}</span
              >
            </p>
            <p class="key">
              Aadhaar Gender :
              <span class="value">{{ editDetails.value.aadhaar?.gender }}</span>
            </p>
            <p class="key">
              Care Of :
              <span
                class="value"
                placement="top"
                [ngbTooltip]="editDetails.value.aadhaar?.care_of"
                container="body"
                >{{ editDetails.value.aadhaar?.care_of }}</span
              >
            </p>
            <p class="key">
              Aadhaar Address :
              <span
                class="value"
                placement="top"
                [ngbTooltip]="editDetails.value.aadhaar?.address"
                container="body"
                >{{ editDetails.value.aadhaar?.address }}</span
              >
            </p>
            <p class="key">
              Aadhaar Email :
              <span
                class="value {{
                  editDetails.value.aadhaar?.email
                    ? 'connected'
                    : 'not-connected'
                }}"
                >{{
                  editDetails.value.aadhaar?.email
                    ? "Available"
                    : "Not available"
                }}</span
              >
            </p>
          </div>

          <div
            *ngIf="kycEditSection || !edit"
            class="kyc-forms {{ !edit ? 'add-convert' : '' }}"
            [ngStyle]="{ flexDirection: !edit ? 'row' : '' }"
            formGroupName="aadhaar"
          >
            <div class="form-group">
              <label> Aadhaar Id</label>
              <input
                class="inputstyle form-control"
                type="text"
                formControlName="aadhaarId"
                name="aadhaarId"
                placeholder="Enter Aadhaar Id"
                [readOnly]="editDetails.value.isAadhaarVerified"
              />
              <div
                class="text-danger w-100 font-smaller"
                *ngIf="form.get('aadhaar.aadhaarId').hasError('pattern')"
              >
                Please enter a valid Aadhaar Number
              </div>
            </div>
            <div class="form-group">
              <label> Aadhaar Name </label>
              <input
                class="inputstyle form-control"
                maxlength="255"
                type="text"
                name="name"
                placeholder="Enter Aadhaar Name"
                formControlName="name"
              />
              <div
                class="text-danger w-100 font-smaller"
                *ngIf="form.get('aadhaar.name').hasError('pattern')"
              >
                Please enter only alphabets
              </div>
            </div>

            <div class="form-group">
              <label> Aadhaar DOB </label>
              <input
                class="inputstyle form-control"
                formControlName="dob"
                type="date"
                name="dob"
                placeholder="Enter Aadhaar DOB"
                [max]="getToday()"
              />
            </div>

            <!-- <div class="form-group">
              <label> Aadhaar Gender </label>
              <input
                class="inputstyle form-control"
                maxlength="255"
                type="text"
                name="gender"
                placeholder="Enter Aadhaar Gender"
                formControlName="gender"
              />
            </div> -->

            <div class="form-group">
              <label>Aadhaar Gender</label>
              <select
                name="gender"
                id="type"
                formControlName="gender"
                class="inputstyle form-control"
              >
                <option value="M">M</option>
                <option value="F">F</option>
                <option value="Other">Other</option>
              </select>
            </div>

            <div class="form-group">
              <label> Care of </label>
              <input
                class="inputstyle form-control"
                maxlength="255"
                type="text"
                name="care_of"
                formControlName="care_of"
                placeholder="Enter Aadhaar Father's Name"
              />
              <div
                class="text-danger w-100 font-smaller"
                *ngIf="form.get('aadhaar.care_of').hasError('pattern')"
              >
                Do not Enter Numbers
              </div>
            </div>
            <!-- <div class="form-group col-md-6">
          <label> Aadhaar Phone Number </label>
          <input
            class="inputstyle form-control"
            type="tel"
            name="aadhaarPhoneNumber"
            formControlName="aadhaarPhoneNumber"
            placeholder="Enter Aadhaar Phone Number"
            [readOnly]="true"
          />
          <div
            class="text-danger w-100 font-smaller"
            *ngIf="form.get('aadhaarPhoneNumber').hasError('pattern')"
          >
            Please enter a valid Contact Number
          </div>
          <div
            class="text-danger w-100 font-smaller"
            *ngIf="form.get('aadhaarPhoneNumber').hasError('minlength')"
          >
            Please enter minimum 8 characters
          </div>
          <div
            class="text-danger w-100 font-smaller"
            *ngIf="form.get('aadhaarPhoneNumber').hasError('maxlength')"
          >
            Only 15 characters allowed
          </div>
        </div> -->

            <div class="form-group">
              <label> Aadhaar Address </label>
              <input
                class="inputstyle form-control"
                maxlength="255"
                type="text"
                name="address"
                placeholder="Enter Aadhaar Address"
                formControlName="address"
              />
            </div>
          </div>
        </div>
        <div
          class="form-row no-margin w-100"
          *ngIf="btnTab === 'KYCDetails' && childBtnTab === 'pan'"
        >
          <div
            *ngIf="!kycEditSection && showCompleteView && edit"
            class="kyc-labels"
          >
            <p class="key">
              Pan ID :
              <span class="value">{{ editDetails.value.pan?.id }}</span>
            </p>
            <p class="key">
              Pan Name :
              <span class="value">{{ editDetails.value.pan?.name }}</span>
            </p>
            <p class="key">
              Pan DOB :
              <span class="value"
                >{{ editDetails.value.pan?.dob }}
                {{ editDetails.value.pan?.dob ? "(YYYY-MM-DD)" : "" }}</span
              >
            </p>
            <p class="key">
              Care Of :
              <span class="value">{{
                editDetails.value.pan?.fathersName
              }}</span>
            </p>
          </div>

          <div
            *ngIf="kycEditSection || !edit"
            class="kyc-forms {{ !edit ? 'add-convert' : '' }}"
            [ngStyle]="{ flexDirection: !edit ? 'row' : '' }"
            formGroupName="pan"
          >
            <div class="form-group">
              <label> Pan Id </label>
              <input
                class="inputstyle form-control"
                type="text"
                formControlName="id"
                name="id"
                placeholder="Enter Pan Id"
                oninput="this.value = this.value.toUpperCase()"
              />
              <div
                class="text-danger w-100 font-smaller"
                *ngIf="form.get('pan.id').hasError('pattern')"
              >
                Please enter a valid Pan Number
              </div>
            </div>
            <div class="form-group">
              <label> PAN Name </label>
              <input
                class="inputstyle form-control"
                maxlength="255"
                type="text"
                formControlName="name"
                name="name"
                placeholder="Enter PAN Name"
              />
              <div
                class="text-danger w-100 font-smaller"
                *ngIf="form.get('pan.name').hasError('pattern')"
              >
                Please enter only alphabets
              </div>
            </div>
            <div class="form-group">
              <label> PAN DOB </label>
              <input
                class="inputstyle form-control"
                type="date"
                name="dob"
                formControlName="dob"
                placeholder="Enter PAN DOB"
                [max]="getToday()"
              />
            </div>
            <div class="form-group">
              <label>Care Of</label>
              <input
                class="inputstyle form-control"
                maxlength="255"
                type="text"
                formControlName="fathersName"
                name="panFathersName"
                placeholder="Enter PAN Father's Name"
              />
              <div
                class="text-danger w-100 font-smaller"
                *ngIf="form.get('pan.fathersName').hasError('pattern')"
              >
                Do not Enter Numbers
              </div>
            </div>
          </div>
        </div>
        <div
          class="form-row no-margin w-100"
          *ngIf="btnTab === 'KYCDetails' && childBtnTab === 'GST'"
        >
          <div
            *ngIf="!kycEditSection && showCompleteView && edit"
            class="kyc-labels"
          >
            <p class="gst-key">
              <span>GST-IN IDs :</span>
              <span class="gst-value">
                <span *ngFor="let gstinId of editDetails.value.gstinIds">
                  {{ gstinId }},&nbsp;&nbsp;</span
                >
              </span>
            </p>
          </div>

          <!-- <div class="kyc-forms" *ngIf="kycEditSection">
            <div class="form-group">
              <label>GST-IN Id</label>
              <input
                class="inputstyle form-control"
                type="text"
                formControlName="gstinId"
                name="gstinId"
                placeholder="Enter GST-IN Id"
                oninput="this.value = this.value.toUpperCase()"
              />
              <div
                class="text-danger w-100 font-smaller"
                *ngIf="form.get('gstinId').hasError('pattern')"
              >
                Please enter a valid GST Number
              </div>
            </div>
          </div> -->
          <div
            *ngIf="kycEditSection || !edit"
            class="kyc-forms"
            [ngStyle]="{ flexDirection: !edit ? 'row' : '' }"
          >
            <div class="row col-12 mx-0 px-0">
              <div
                class="no-margin col-md-12 mx-0 px-0 mb-2"
                *ngIf="showCompleteView"
              >
                <form
                  class="form-row no-margin no-padding {{
                    !edit ? 'col-md-6' : ''
                  }}"
                  [formGroup]="gstinIds"
                  (ngSubmit)="addGstId()"
                >
                  <label class="d-block" style="width: 100%">Add GST ID</label>
                  <input
                    autocomplete="off"
                    required
                    placeholder="GST ID"
                    class="inputstyle col-md-10 form-control"
                    formControlName="gstinIdsName"
                    pattern="^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$"
                    oninput="this.value = this.value.toUpperCase()"
                  />
                  <button
                    class="col-md-2 btn addContactBtn bg-transparent border-0"
                    [disabled]="!gstinIds.valid"
                    (click)="addGstId()"
                  >
                    <i class="fa fa-plus-circle"></i>
                  </button>
                </form>

                <div
                  class="col-md-12 mx-0 px-0 pt-2"
                  *ngIf="
                    form &&
                    form.value.gstinIds &&
                    form.value.gstinIds?.length > 0
                  "
                >
                  <label>Added GST ID</label>
                  <div class="row m-0">
                    <div
                      class="col-md-6 p-0"
                      *ngFor="let alias of form.value.gstinIds; let i = index"
                    >
                      <div
                        class="addedList mb-1 defaultText"
                        container="body"
                        placement="top"
                        [ngbTooltip]="alias"
                      >
                        {{ alias }}
                        <span class="delIcon" (click)="deleteGstID(alias)">
                          <img height="15px" src="./assets/images/cross.png" />
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="form-row no-margin w-100"
          *ngIf="btnTab === 'KYCDetails' && childBtnTab === 'Others'"
        >
          <div
            *ngIf="!kycEditSection && showCompleteView && edit"
            class="kyc-labels"
          >
            <p class="key">
              Company ID :
              <span class="value">{{ editDetails.value.companyId }}</span>
            </p>
            <p class="key">
              IE Code :
              <span class="value">{{ editDetails.value.ieCode }}</span>
            </p>
          </div>

          <div
            *ngIf="kycEditSection || !edit"
            class="kyc-forms {{ !edit ? 'add-convert' : '' }}"
            [ngStyle]="{ flexDirection: !edit ? 'row' : '' }"
          >
            <div class="form-group">
              <label>Company Id</label>
              <input
                class="inputstyle form-control"
                maxlength="55"
                type="text"
                formControlName="companyId"
                name="companyId"
                placeholder="Enter Company Id"
              />
            </div>

            <div class="form-group">
              <label> IE Code </label>
              <input
                class="inputstyle form-control"
                maxlength="55"
                type="number"
                formControlName="ieCode"
                name="ieCode"
                placeholder="Enter IE Code"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ----------end of aadhaar, pan, etc -->

    <!-- basic details form -->
    <div
      class="form-group"
      *ngIf="(!edit || editSection === 1) && btnTab === 'basicDetails'"
    >
      <div class="addheader h5 w-100">
        Basic Details
        <button
          *ngIf="edit"
          class="float-right primarybtnstyle btn ml-2"
          (click)="save()"
        >
          Save
        </button>
        <!-- [disabled]="!form.valid"
        deleted from button tag from line no 901 to make the button enable  -->
        
    
        <button
          *ngIf="edit"
          type="reset"
          class="float-right secondarybtnstyle btn"
          (click)="closeEditSection(1)"
        >
          Cancel
        </button>
      </div>
      <div class="form-row no-margin">
        <div class="form-group col-md-6">
          <label *ngIf="editDetails.value.comptype !== 'EMPLOYEE'">
            Legal Name*
          </label>
          <label *ngIf="editDetails.value.comptype === 'EMPLOYEE'">
            Employee Name*
          </label>

          <input
            autocomplete="off"
            maxlength="255"
            type="text"
            required
            name="legalname"
            formControlName="name"
            (blur)="assignDefaultName($event.target.value)"
            class="inputstyle form-control"
            placeholder="Enter Company Legal name"
          />
          <div
            *ngIf="form.value.name"
            class="text-muted text-right font-smaller font-italic pt-1"
          >
            {{ 255 - form.value.name.length }} of 255 chars left
          </div>
        </div>
        <!-- <div
          class="form-group col-md-6"
          *ngIf="editDetails.value.comptype === 'EMPLOYEE'"
        >
          <label> Employee Name* </label>
          <input
            autocomplete="off"
            maxlength="255"
            type="text"
            required
            name="employeename"
            formControlName="employeeName"
            class="inputstyle form-control"
            placeholder="Enter Employee Name"
          />
          <div
            *ngIf="form.value.name"
            class="text-muted text-right font-smaller font-italic pt-1"
          >
            {{ 255 - form.value.name.length }} of 255 chars left
          </div>
        </div> -->
        <div class="form-group col-md-6" *ngIf="showCompleteView">
          <label> Parent Name </label>
          <app-type-ahead
            #parentname
            [value]="
              form.value.parentlegalname ? form.value.parentlegalname : ''
            "
            [search]="'dynamic'"
            [type]="'company'"
            (resultEmitter)="assignParent($event)"
          ></app-type-ahead>
        </div>

        <div class="form-group col-md-6">
          <label> Short Name* </label>
          <input
            required
            maxlength="255"
            autocomplete="off"
            type="text"
            name="usedname"
            formControlName="friendlyname"
            class="inputstyle form-control"
            (blur)="trimField('friendlyname')"
            placeholder="Enter Friendly Name"
          />
          <div
            *ngIf="form.value.friendlyname"
            class="text-muted text-right font-smaller font-italic pt-1"
          >
            {{ 255 - form.value.friendlyname.length }} of 255 chars left
          </div>
        </div>
        <div class="form-group col-md-6">
          <label> Registration Country* </label>
          <input
            required
            class="inputstyle form-control"
            formControlName="registered"
            placeholder="Enter Registered Country"
            [ngbTypeahead]="searchCountry"
            autocomplete="new-password"
            [inputFormatter]="countryformatter"
            [resultFormatter]="countryformatter"
            (keyup)="preventNumber($event, 'registered')"
            (blur)="checkReg()"
          />
        </div>

        <div class="form-group col-md-6">
          <label> Primary Email Id </label>
          <input
            class="inputstyle form-control"
            maxlength="255"
            type="text"
            formControlName="primaryEmailId"
            name="primaryEmailId"
            placeholder="Enter Primary Email Id"
          />
          <div
            class="text-danger font-smaller"
            *ngIf="form.get('primaryEmailId').hasError('pattern')"
          >
            Please enter a valid email address
          </div>
        </div>
        <div class="form-group col-md-6">
          <label> Primary Phone Number </label>
          <input
            class="inputstyle form-control"
            maxlength="255"
            type="text"
            formControlName="primaryPhoneNumber"
            name="primaryPhoneNumber"
            placeholder="Enter Primary Phone Number"
          />
          <div
            class="text-danger w-100 font-smaller"
            *ngIf="form.get('primaryPhoneNumber').hasError('pattern')"
          >
            Please enter a valid Contact Number
          </div>
          <div
            class="text-danger w-100 font-smaller"
            *ngIf="form.get('primaryPhoneNumber').hasError('minlength')"
          >
            Please enter minimum 8 characters
          </div>
          <div
            class="text-danger w-100 font-smaller"
            *ngIf="form.get('primaryPhoneNumber').hasError('maxlength')"
          >
            Only 15 characters allowed
          </div>
        </div>

        <div class="form-group col-md-6" *ngIf="showCompleteView">
          <label>Carrier Type</label>
          <select
            name="companytype"
            id="type"
            formControlName="comptype"
            class="inputstyle form-control"
          >
            <option selected value="">Select Carrier Type</option>
            <option *ngFor="let type of compType" [ngValue]="type.name">
              {{ type.name }}
            </option>
          </select>
        </div>
        <div class="form-group col-md-6" *ngIf="showCompleteView">
          <label>Group</label>
          <app-type-ahead
            #groupTypeahead
            [value]="groupName"
            [search]="'dynamic'"
            [createAllowed]="true"
            [type]="'groups'"
            (resultEmitter)="assignGroup($event)"
          ></app-type-ahead>
        </div>
        <!-- Partner Level -->
        <!-- Partner Level - ref Data -->
        <div class="form-group col-md-6" *ngIf="showCompleteView">
          <label>Partner Level</label>
          <select
            name="partnerLevel"
            id="partnerLevel"
            formControlName="partnerLevel"
            class="inputstyle form-control"
          >
            <option selected value="">Select Partner Level</option>
            <option *ngFor="let name of companyLevels" [ngValue]="name">
              {{ name }}
            </option>
          </select>
        </div>

        <div class="form-group col-md-6" *ngIf="showCompleteView">
          <!-- <input type="checkbox" class="cursor-pointer" checked="true" id="active" > -->
          <label class="cursor-pointer">Active</label>
          <div class="toggle-switch" style="top: 0">
            <input type="checkbox" formControlName="isactive" />
            <div class="knobs">
              <span></span>
            </div>
            <div class="layer"></div>
          </div>
        </div>

        <div class="form-group col-md-6" *ngIf="showCompleteView && edit">
          <label class="cursor-pointer">OFAC Check Required</label>
          <div class="toggle-switch" style="top: 0">
            <input type="checkbox" formControlName="ofacrequired" />
            <div class="knobs">
              <span></span>
            </div>
            <div class="layer"></div>
          </div>
        </div>

        <div class="form-group col-md-6" *ngIf="showCompleteView">
          <label class="cursor-pointer">BlackListed</label>
          <div class="toggle-switch" style="top: 0">
            <input
              type="checkbox"
              formControlName="blackList"
              name="blackList"
            />
            <div class="knobs">
              <span></span>
            </div>
            <div class="layer"></div>
          </div>
        </div>

        <div class="form-group col-md-6 pr-1" *ngIf="showCompleteView">
          <label class="selected-item font-weight-normal pr-1" container="body"
            >User's Profile Icon</label
          >
          <div class="fileuploader">
            <div
              class="inputstyle w-30 pt-1"
              (click)="onIconInputClick('companyProfileIcon')"
            >
              {{ profileIconName ? profileIconName : "Upload Icon" }}
            </div>
            <input
              type="file"
              class="inputstyle w-30 hidden"
              id="companyProfileIcon"
              accept=".png"
              (change)="getProfilePic($event)"
            />
          </div>
          <img
            style="margin-top: 10px"
            width="70"
            height="70"
            [src]="tempProfileImageUrl || companyProfileImageUrl"
            *ngIf="companyProfileImageUrl !== undefined"
        
          />
        </div>

        <div class="row col-12 mb-2">
          <div class="no-margin col-md-12 mr-0 pr-0" *ngIf="showCompleteView">
            <label class="d-block">Add Alias</label>
            <form
              class="form-row no-margin col-md-6 no-padding"
              [formGroup]="alias"
              (ngSubmit)="addAlias()"
            >
              <input
                autocomplete="off"
                required
                placeholder="Add Alias"
                class="inputstyle col-md-10 form-control"
                formControlName="aliasname"
              />
              <button
                class="col-md-2 btn addContactBtn bg-transparent border-0"
                [disabled]="!alias.valid"
                (click)="addAlias()"
              >
                <i class="fa fa-plus-circle"></i>
              </button>
            </form>
            <div
              class="col-md-12 mx-0 px-0 pt-2"
              *ngIf="
                form && form.value.aliases && form.value.aliases.length > 0
              "
            >
              <label>Added Alias</label>
              <div class="row m-0">
                <div
                  class="col-md-4 p-0"
                  *ngFor="let alias of form.value.aliases; let i = index"
                >
                  <div
                    class="addedList mb-1"
                    container="body"
                    placement="top"
                    [ngbTooltip]="alias"
                  >
                    {{ alias }}
                    <span class="delIcon" (click)="deleteAlias(alias)">
                      <img height="15px" src="./assets/images/cross.png" />
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <label class="addheader h5 w-100">SAP IDs</label>
        <div class="row col-12 mx-0 px-0">
          <div
            class="no-margin col-md-12 mx-0 px-0 mb-2"
            *ngIf="showCompleteView"
          >
            <label class="d-block"> Vendor SAP Id</label>
            <form
              class="form-row no-margin col-md-6 no-padding"
              [formGroup]="vendorsapid"
              (ngSubmit)="addVendorSapId()"
            >
              <input
                autocomplete="off"
                required
                placeholder="Vendor SAP Id"
                class="inputstyle col-md-10 form-control"
                formControlName="vendorsapidname"
              />
              <button
                class="col-md-2 btn addContactBtn bg-transparent border-0"
                [disabled]="!vendorsapid.valid"
                (click)="addVendorSapId()"
              >
                <i class="fa fa-plus-circle"></i>
              </button>
            </form>
            <div
              class="col-md-12 mx-0 px-0 pt-2"
              *ngIf="
                form &&
                form.value.vendorsapid &&
                form.value.vendorsapid.length > 0
              "
            >
              <label class="d-block">Added Vendor SAP Id</label>
              <div class="row m-0">
                <div
                  class="col-md-4 p-0"
                  *ngFor="let alias of form.value.vendorsapid; let i = index"
                >
                  <div
                    class="addedList mb-1"
                    container="body"
                    placement="top"
                    [ngbTooltip]="alias"
                  >
                    {{ alias }}
                    <span class="delIcon" (click)="deleteVendorSapId(alias)">
                      <img height="15px" src="./assets/images/cross.png" />
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="no-margin col-md-12 mx-0 px-0 mb-2"
            *ngIf="showCompleteView"
          >
            <form
              class="form-row no-margin col-md-6 no-padding"
              [formGroup]="customersapid"
              (ngSubmit)="addCustomerSapId()"
            >
              <label class="d-block">Customer SAP Id</label>
              <input
                autocomplete="off"
                required
                placeholder="Customer SAP Id"
                class="inputstyle col-md-10 form-control"
                formControlName="customersapidname"
              />
              <button
                class="col-md-2 btn addContactBtn bg-transparent border-0"
                [disabled]="!customersapid.valid"
                (click)="addCustomerSapId()"
              >
                <i class="fa fa-plus-circle"></i>
              </button>
            </form>
            <div
              class="col-md-12 mx-0 px-0 pt-2"
              *ngIf="
                form &&
                form.value.customersapid &&
                form.value.customersapid.length > 0
              "
            >
              <label>Added Customer SAP Id</label>
              <div class="row m-0">
                <div
                  class="col-md-4 p-0"
                  *ngFor="let alias of form.value.customersapid; let i = index"
                >
                  <div
                    class="addedList mb-1"
                    container="body"
                    placement="top"
                    [ngbTooltip]="alias"
                  >
                    {{ alias }}
                    <span class="delIcon" (click)="deleteCustomerSapId(alias)">
                      <img height="15px" src="./assets/images/cross.png" />
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <label class="addheader h5 w-100">Other Emails</label>
        <div class="row col-12 mx-0 px-0">
          <div
            class="no-margin col-md-12 mx-0 px-0 mb-2"
            *ngIf="showCompleteView"
          >
            <form
              class="form-row no-margin col-md-6 no-padding"
              [formGroup]="otherEmails"
              (ngSubmit)="addContactEmails()"
            >
              <label class="d-block">Add Contact Emails</label>
              <input
                autocomplete="off"
                required
                placeholder="Other Emails"
                class="inputstyle col-md-10 form-control"
                formControlName="otherEmailsName"
                pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
              />
              <button
                class="col-md-2 btn addContactBtn bg-transparent border-0"
                [disabled]="!otherEmails.valid"
                (click)="addContactEmails()"
              >
                <i class="fa fa-plus-circle"></i>
              </button>
            </form>

            <div
              class="col-md-12 mx-0 px-0 pt-2"
              *ngIf="
                form &&
                form.value.otherEmails &&
                form.value.otherEmails?.length > 0
              "
            >
              <label>Added Contact Emails</label>
              <div class="row m-0">
                <div
                  class="col-md-6 p-0"
                  *ngFor="let alias of form.value.otherEmails; let i = index"
                >
                  <div
                    class="addedList mb-1 defaultText"
                    container="body"
                    placement="top"
                    [ngbTooltip]="alias"
                  >
                    {{ alias }}
                    <span class="delIcon" (click)="deleteContactEmails(alias)">
                      <img height="15px" src="./assets/images/cross.png" />
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <label class="addheader h5 w-100">Other Phone Numbers</label>
        <div class="row col-12 mx-0 px-0">
          <div
            class="no-margin col-md-12 mx-0 px-0 mb-2"
            *ngIf="showCompleteView"
          >
            <form
              class="form-row no-margin col-md-6 no-padding"
              [formGroup]="otherPhoneNumbers"
              (ngSubmit)="addOtherPhone()"
            >
              <label class="d-block">Add Other Phone Numbers</label>
              <input
                autocomplete="off"
                required
                placeholder="Add Phone Number"
                class="inputstyle col-md-10 form-control"
                formControlName="otherPhoneNumbersName"
                pattern="^[+0-9]*$"
                minlength="8"
                maxlength="15"
              />
              <button
                class="col-md-2 btn addContactBtn bg-transparent border-0"
                [disabled]="!otherPhoneNumbers.valid"
                (click)="addOtherPhone()"
              >
                <i class="fa fa-plus-circle"></i>
              </button>
            </form>

            <div
              class="col-md-12 mx-0 px-0 pt-2"
              *ngIf="
                form &&
                form.value.otherPhoneNumbers &&
                form.value.otherPhoneNumbers?.length > 0
              "
            >
              <label>Added Phone Numbers</label>
              <div class="row m-0">
                <div
                  class="col-md-6 p-0"
                  *ngFor="
                    let alias of form.value.otherPhoneNumbers;
                    let i = index
                  "
                >
                  <div
                    class="addedList mb-1 defaultText"
                    container="body"
                    placement="top"
                    [ngbTooltip]="alias"
                  >
                    {{ alias }}
                    <span class="delIcon" (click)="deleteOtherPhone(alias)">
                      <img height="15px" src="./assets/images/cross.png" />
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <label class="addheader h5 w-100">Account Manager</label>
        <div class="row col-12 mx-0 px-0">
          <form
            class="no-margin col-md-12 mx-0 px-0 mb-2"
            [formGroup]="accountManagers"
            *ngIf="showCompleteView"
          >
            <small class="w-100"
              >Add Account Manager &nbsp;
              <small
                class="secondary-color"
                *ngIf="form.value.accountManagers?.length"
                >({{ form.value.accountManagers?.length }})</small
              >
              <small
                class="secondary-color"
                *ngIf="form.value.accountManagers?.length == salesUsers?.length"
                >All Selected</small
              >
            </small>
            <ng-multiselect-dropdown
              [placeholder]="'Select'"
              name="accountManagersName"
              formControlName="accountManagersName"
              [settings]="groupDropdownSettings"
              [data]="salesUsers"
              [(ngModel)]="form.value.accountManagers"
            >
            </ng-multiselect-dropdown>
          </form>
        </div>
      </div>
    </div>

    <div [ngStyle]="{ display: btnTab === 'basicDetails' ? 'block' : 'none' }">
      <div *ngIf="showAddressForm">
        <app-address-form
          #addressForm
          [showCancel]="form.value.addresses.length > 0 ? true : false"
          [editAddress]="companyAddress"
          [showAddBtn]="edit"
          [bindonchange]="false"
          [countries]="countries"
          (addressSaveEmitter)="addAddress($event)"
        >
        </app-address-form>
      </div>

      <div
        *ngIf="form && form.value.addresses.length > 0"
        class="addedFormPanel position-relative"
      >
        <app-added-address
          [addresses]="form.value.addresses"
          [showAddBtn]="showAddressForm"
          (addressAction)="addressAction($event)"
          (addAddress)="toggleAddressForm()"
        >
        </app-added-address>
      </div>

      <div class="w-100 mt-4" *ngIf="showCompleteView && edit">
        <form
          class="form-group no-margin"
          *ngIf="edit && showContactForm"
          [formGroup]="contactForm"
          (ngSubmit)="addContact()"
        >
          <label class="group-header-label"
            >Contact
            <div class="float-right">
              <button
                type="reset"
                class="secondarybtnstyle btn mr-2"
                (click)="toggleContactForm()"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="btn primarybtnstyle"
                [disabled]="!contactForm.valid"
              >
                <!-- <i class="fa fa-plus-circle"></i>-->
                Save
              </button>
            </div>
          </label>
          <div class="form-row no-margin no-padding">
            <div class="col-md-6 form-group">
              <label>Name* </label>
              <input
                autocomplete="off"
                type="text"
                required
                name="contactname"
                formControlName="name"
                class="inputstyle form-control"
                placeholder="Enter Contact Name"
              />
              <div
                class="text-danger font-smaller"
                *ngIf="contactForm.get('name').hasError('pattern')"
              >
                Please enter only alphabets
              </div>
            </div>
            <div class="col-md-6 form-group">
              <label>Type</label>
              <select
                name="contacttype"
                id="contype"
                formControlName="typeid"
                class="inputstyle form-control"
              >
                <option selected value="">Select Contact Type</option>
                <option *ngFor="let type of contactType" [ngValue]="type.id">
                  {{ type.name }}
                </option>
              </select>
            </div>
            <div class="col-md-6 form-group">
              <label>Email</label>
              <input
                autocomplete="off"
                type="email"
                name="contactemail"
                formControlName="email"
                class="inputstyle form-control"
                placeholder="Enter Contact Email"
              />
              <div
                class="text-danger font-smaller"
                *ngIf="contactForm.get('email').hasError('pattern')"
              >
                Please enter a valid email address
              </div>
            </div>
            <div class="col-md-6 form-group">
              <label>Phone</label>
              <div class="row no-margin">
                <!-- <select name="phoneext" id="contphoneext" formControlName="countryCode" class="inputstyle col-md-2 no-padding form-control">
           <option *ngFor="let type of phoneCountryCode" [ngValue]="type">{{type}}</option>
         </select> -->
                <input
                  autocomplete="off"
                  type="tel"
                  name="contactphone"
                  formControlName="phone"
                  class="inputstyle col-md-10 form-control"
                  placeholder="Enter Contact phone"
                />
                <div
                  class="text-danger w-100 font-smaller"
                  *ngIf="contactForm.get('phone').hasError('pattern')"
                >
                  Please enter a valid Contact Number
                </div>
                <div
                  class="text-danger w-100 font-smaller"
                  *ngIf="contactForm.get('phone').hasError('minlength')"
                >
                  Please enter minimum 8 characters
                </div>
                <div
                  class="text-danger w-100 font-smaller"
                  *ngIf="contactForm.get('phone').hasError('maxlength')"
                >
                  Only 15 characters allowed
                </div>
              </div>
            </div>
            <div class="col-md-6 form-group">
              <label>Fax</label>

              <div class="row no-margin">
                <!-- <select name="faxext" id="contfaxext" formControlName="countryCode" class="inputstyle col-md-2 no-padding form-control">
         <option *ngFor="let type of phoneCountryCode" [ngValue]="type">{{type}}</option>
       </select> -->
                <input
                  autocomplete="off"
                  type="tel"
                  name="contactfax"
                  formControlName="fax"
                  class="inputstyle form-control col-md-10"
                  placeholder="Enter Contact fax"
                />
                <div
                  class="text-danger w-100 font-smaller"
                  *ngIf="contactForm.get('fax').hasError('pattern')"
                >
                  Please enter a valid Fax
                </div>
                <div
                  class="text-danger w-100 font-smaller"
                  *ngIf="contactForm.get('fax').hasError('minlength')"
                >
                  Please enter minimum 8 characters
                </div>
                <div
                  class="text-danger w-100 font-smaller"
                  *ngIf="contactForm.get('fax').hasError('maxlength')"
                >
                  Only 15 characters allowed
                </div>
              </div>
            </div>
          </div>
        </form>
        <div *ngIf="form && form.value.contacts" class="addedFormPanel">
          <div class="addheader h5 pb-2 mt-4">
            Existing Contacts
            <div class="float-right">
              <button
                *ngIf="!showContactForm"
                class="ml-2 primarybtnstyle btn"
                (click)="toggleContactForm()"
              >
                Add New Contact
              </button>
            </div>
          </div>
          <div
            class="font-weight-light"
            *ngIf="form.value.contacts.length === 0"
          >
            No Contacts Found
          </div>
          <div
            *ngFor="let cont of form.value.contacts; let idx = index"
            class="addedForm pt-3"
          >
            <div
              class="d-flex justify-content-end"
              *ngIf="editContactId !== idx"
            >
              <i
                class="fa fa-pencil action-icon"
                (click)="editContact(cont, idx)"
              >
              </i>
              <i
                class="fa fa-trash action-icon"
                (click)="deleteFromForms(cont, 'contacts')"
              >
              </i>
            </div>
            <div
              class="d-flex justify-content-end"
              *ngIf="editContactId == idx"
            >
              <button
                (click)="closeContactEdit()"
                class="secondarybtnstyle btn mr-2"
              >
                Cancel
              </button>
              <button
                (click)="saveContactChanges()"
                class="primarybtnstyle btn mr-2"
              >
                Save
              </button>
            </div>

            <div class="form-row no-margin no-padding">
              <div class="col-md-6 form-group">
                <label class="font-weight-light">Name:</label>
                <span class="pl-2" *ngIf="editContactId !== idx"
                  >{{ cont.name }}
                </span>
                <input
                  *ngIf="editContactId == idx"
                  (keyup)="putContactval(idx, $event.target.value, 'name')"
                  type="text"
                  [value]="cont.name"
                  class="inputstyle form-control"
                  placeholder="Enter Contact Name"
                />
              </div>
              <div class="col-md-6 form-group">
                <label class="font-weight-light">Type:</label>
                <span class="pl-2" *ngIf="editContactId !== idx"
                  >{{ cont.typeid }}
                </span>
                <select
                  *ngIf="editContactId == idx"
                  (change)="putContactval(idx, $event.target.value, 'typeid')"
                  class="inputstyle form-control"
                >
                  <option selected value="">Select Contact Type</option>
                  <option *ngFor="let type of contactType" [ngValue]="type.id">
                    {{ type.name }}
                  </option>
                </select>
              </div>
              <div class="col-md-6 form-group">
                <label class="font-weight-light">Email:</label>
                <span class="pl-2" *ngIf="editContactId !== idx">
                  {{ cont.email }}
                </span>
                <input
                  *ngIf="editContactId == idx"
                  (change)="putContactval(idx, $event.target.value, 'email')"
                  type="email"
                  [value]="cont.email"
                  class="inputstyle form-control"
                />
              </div>
              <div class="col-md-6 form-group">
                <label class="font-weight-light">Phone:</label>
                <span class="pl-2" *ngIf="editContactId !== idx"
                  >{{ cont.phone }}
                </span>
                <input
                  *ngIf="editContactId == idx"
                  (change)="putContactval(idx, $event.target.value, 'phone')"
                  type="tel"
                  [value]="cont.phone"
                  class="inputstyle form-control"
                />
              </div>
              <div class="col-md-6 form-group">
                <label class="font-weight-light">Fax:</label>
                <span class="pl-2" *ngIf="editContactId !== idx"
                  >{{ cont.fax }}
                </span>
                <input
                  *ngIf="editContactId == idx"
                  (change)="putContactval(idx, $event.target.value, 'fax')"
                  type="tel"
                  [value]="cont.fax"
                  class="inputstyle form-control"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="w-100 mt-4" *ngIf="edit && showCompleteView">
        <form
          class="form-group"
          *ngIf="showoutcomeForm"
          [formGroup]="outcome"
          (ngSubmit)="addOutcome(1)"
        >
          <label class="group-header-label"
            >Company OFAC Check
            <div class="float-right">
              <button
                type="reset"
                class="secondarybtnstyle btn mr-2"
                (click)="toggleOutcomeForm()"
              >
                Cancel
              </button>
              <button
                type="submit"
                [disabled]="!outcome.valid"
                class="btn primarybtnstyle"
              >
                <!-- <i class="fa fa-plus-circle"></i> -->
                Save
              </button>
            </div>
          </label>
          <div class="form-row no-margin">
            <div class="form-group col-md-4">
              <label> Date </label>
              <!-- <input  class="inputstyle form-control" type="date" name="ofacdate" formControlName="ofacdate" placeholder="Enter date"/> -->
              <div class="input-group">
                <input
                  required
                  class="form-control"
                  placeholder="DD-MMM-YYYY"
                  name="dp"
                  (click)="d.toggle()"
                  (keydown)="$event.preventDefault(); d.open()"
                  ngbDatepicker
                  #d="ngbDatepicker"
                  formControlName="ofacdate"
                />
                <div class="input-group-append">
                  <button
                    class="btn btn-outline-secondary fa fa-calendar"
                    (click)="d.toggle()"
                    type="button"
                  ></button>
                </div>
              </div>
            </div>
            <div class="form-group col-md-4">
              <label> Outcome </label>
              <select
                required
                name="contacttype"
                formControlName="outcome"
                class="form-control"
              >
                <option value="" selected disabled>Select Outcome</option>
                <option *ngFor="let type of outcomeType" [ngValue]="type">
                  {{ type }}
                </option>
              </select>
            </div>
            <div class="form-group col-md-6">
              <label> Transaction ID </label>
              <input
                required
                formControlName="transactionid"
                class="form-control"
                placeholder="Enter Transaction ID"
              />
            </div>
          </div>
        </form>

        <div *ngIf="form && form.value.ofacs" class="addedFormPanel">
          <div class="addheader h5 pb-2 mt-4">
            Existing Company OFAC Checks
            <div class="float-right">
              <button
                *ngIf="!showoutcomeForm"
                class="ml-2 primarybtnstyle btn"
                (click)="toggleOutcomeForm()"
              >
                Add New
              </button>
            </div>
          </div>
          <div class="font-weight-light" *ngIf="ofac.company.length === 0">
            No Existing Company OFAC Checks Found
          </div>
          <div
            *ngFor="let sign of ofac.company; let id = index"
            class="addedForm position-relative pr-2"
          >
            <div class="d-flex justify-content-end">
              <i
                *ngIf="editOfacId !== id"
                class="action-icon fa fa-pencil"
                (click)="editOfac(id)"
              >
              </i>
              <button
                *ngIf="editOfacId === id"
                class="secondarybtnstyle mr-2 btn"
                (click)="cancelEditOfac()"
              >
                Cancel
              </button>
              <button
                *ngIf="editOfacId === id"
                class="primarybtnstyle btn mr-2"
                (click)="closeOfac()"
              >
                Save
              </button>
            </div>
            <div class="form-row no-margin">
              <div class="form-group col-md-6">
                <label class="font-weight-light w-50 pl-0">
                  Date
                  <span class="float-right" *ngIf="editOfacId !== id">:</span>
                </label>
                <span *ngIf="editOfacId !== id" class="ml-2"
                  >{{ sign.ofacdate | date : "dd-MMM-yyyy" }}
                </span>
                <div class="input-group" *ngIf="editOfacId === id">
                  <input
                    class="form-control"
                    placeholder="DD-MMM-YYYY"
                    (click)="d2.toggle()"
                    (dateSelect)="putValueOfac(id, $event, 'ofacdate')"
                    (keydown)="$event.preventDefault(); d2.open()"
                    ngbDatepicker
                    #d2="ngbDatepicker"
                    [value]="sign.ofacdate"
                  />
                  <div class="input-group-append">
                    <button
                      class="btn btn-outline-secondary fa fa-calendar"
                      (click)="d2.toggle()"
                      type="button"
                    ></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label class="font-weight-light w-50 pl-0">
                  Outcome
                  <span class="float-right" *ngIf="editOfacId !== id">:</span>
                </label>
                <span *ngIf="editOfacId !== id" class="ml-2">
                  {{ sign.outcome }}
                </span>
                <!-- <input class="inputstyle form-control" [readonly]="editOfacId !==id" type="text" name="ofacsignres" [value]="sign.outcome" placeholder="Enter Outcome"/> -->
                <select
                  [value]="sign.outcome"
                  (change)="putValueOfac(id, $event.target.value, 'outcome')"
                  *ngIf="editOfacId === id"
                  class="form-control"
                >
                  <option
                    [selected]="type === sign.outcome"
                    *ngFor="let type of outcomeType"
                    [ngValue]="type"
                  >
                    {{ type }}
                  </option>
                </select>
              </div>
              <div class="form-group col-md-6">
                <label class="font-weight-light w-50 pl-0"
                  >Transaction ID
                  <span class="float-right" *ngIf="editOfacId !== id">:</span>
                </label>
                <span *ngIf="editOfacId !== id" class="ml-2">{{
                  sign.transactionid
                }}</span>
                <input
                  *ngIf="editOfacId === id"
                  class="form-control"
                  (keyup)="
                    putValueOfac(id, $event.target.value, 'transactionid')
                  "
                  type="text"
                  [value]="sign.transactionid"
                  placeholder="Enter Ttransaction ID"
                />
              </div>
            </div>
          </div>
          <form
            class="form-group mt-4"
            *ngIf="showSignatoryForm"
            [formGroup]="signatory"
            (ngSubmit)="addOutcome(2)"
          >
            <label class="group-header-label"
              >Signatory OFAC Check
              <div class="float-right">
                <button
                  type="reset"
                  class="secondarybtnstyle btn mr-2"
                  (click)="toggleSignatoryForm()"
                >
                  Cancel
                </button>
                <button
                  type="submit"
                  [disabled]="!signatory.valid"
                  class="btn primarybtnstyle"
                >
                  Save
                  <!-- <i class="fa fa-plus-circle"></i> -->
                </button>
              </div>
            </label>
            <div class="form-row no-margin">
              <div class="form-group col-md-4">
                <label> Signatory Name* </label>
                <input
                  required
                  class="form-control"
                  type="text"
                  name="ofacsignname"
                  formControlName="signatoryname"
                  placeholder="Enter Signatory"
                />
              </div>
              <div class="form-group col-md-4">
                <label> Date* </label>
                <!-- <input  class="inputstyle form-control"  type="date" name="ofacsigndate" formControlName="ofacdate"  placeholder="Enter date"/> -->
                <div class="input-group">
                  <input
                    required
                    class="form-control"
                    placeholder="DD-MMM-YYYY"
                    name="dp"
                    (click)="d1.toggle()"
                    (keydown)="$event.preventDefault(); d1.open()"
                    ngbDatepicker
                    #d1="ngbDatepicker"
                    formControlName="ofacdate"
                  />
                  <div class="input-group-append">
                    <button
                      class="btn btn-outline-secondary fa fa-calendar"
                      (click)="d1.toggle()"
                      type="button"
                    ></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-4">
                <label> Outcome </label>
                <select required formControlName="outcome" class="form-control">
                  <option value="" selected disabled>Select Outcome</option>
                  <option *ngFor="let type of outcomeType" [ngValue]="type">
                    {{ type }}
                  </option>
                </select>
              </div>
              <div class="form-group col-md-6">
                <label> Transaction ID: </label>
                <input
                  required
                  formControlName="transactionid"
                  class="form-control"
                  placeholder="Enter Transaction ID"
                />
              </div>
            </div>
          </form>
          <div class="addheader h5 pb-2 mt-4">
            Existing Signatory OFAC Checks
            <div class="float-right">
              <button
                *ngIf="!showSignatoryForm"
                class="ml-2 primarybtnstyle btn"
                (click)="toggleSignatoryForm()"
              >
                Add New
              </button>
            </div>
          </div>
          <div class="font-weight-light" *ngIf="ofac.signatory.length === 0">
            No Existing Signatory OFAC Checks Found
          </div>
          <div
            *ngFor="let sign of ofac.signatory; let id = index"
            class="addedForm position-relative"
            [ngClass]="{ 'pr-2': editsignOfacid === id }"
          >
            <div class="addedFormActionBtnCont">
              <i
                *ngIf="editsignOfacid !== id"
                class="fa fa-pencil action-icon"
                (click)="editOfac(id, 1)"
              >
              </i>
            </div>
            <div
              *ngIf="editsignOfacid === id"
              class="w-100 d-flex justify-content-end"
            >
              <button
                class="secondarybtnstyle btn mr-2"
                (click)="cancelEditOfac(1)"
              >
                Cancel
              </button>
              <button class="primarybtnstyle btn" (click)="closeOfac(1)">
                Save
              </button>
            </div>
            <div class="form-row no-margin">
              <div class="form-group col-md-6">
                <label class="font-weight-light w-50">
                  Signatory Name
                  <span class="float-right" *ngIf="editsignOfacid !== id"
                    >:</span
                  >
                </label>
                <span class="col-md-8" *ngIf="editsignOfacid !== id"
                  >{{ sign.signatoryname }}
                </span>
                <input
                  class="form-control"
                  (keyup)="
                    putValueOfac(id, $event.target.value, 'signatoryname', 1)
                  "
                  *ngIf="editsignOfacid === id"
                  type="text"
                  [value]="sign.signatoryname"
                  placeholder="Enter Signatory"
                />
              </div>
              <div class="form-group col-md-6">
                <label class="font-weight-light w-50">
                  Date<span class="float-right" *ngIf="editsignOfacid !== id"
                    >:</span
                  >
                </label>
                <span *ngIf="editsignOfacid !== id" class="ml-2"
                  >{{ sign.ofacdate | date : "dd-MMM-yyyy" }}
                </span>
                <div class="input-group" *ngIf="editsignOfacid === id">
                  <input
                    class="form-control"
                    placeholder="DD-MMM-YYYY"
                    (click)="d2.toggle()"
                    (dateSelect)="putValueOfac(id, $event, 'ofacdate', 1)"
                    (keydown)="$event.preventDefault(); d2.open()"
                    ngbDatepicker
                    #d2="ngbDatepicker"
                    [value]="sign.ofacdate"
                  />
                  <div class="input-group-append">
                    <button
                      class="btn btn-outline-secondary fa fa-calendar"
                      (click)="d2.toggle()"
                      type="button"
                    ></button>
                  </div>
                </div>
              </div>
              <div class="form-group col-md-6">
                <label class="font-weight-light w-50">
                  Outcome<span class="float-right" *ngIf="editsignOfacid !== id"
                    >:</span
                  >
                </label>
                <span *ngIf="editsignOfacid !== id" class="ml-2">
                  {{ sign.outcome }}
                </span>
                <!-- <input class="inputstyle form-control" [readonly]="editOfacId !==id" type="text" name="ofacsignres" [value]="sign.outcome" placeholder="Enter Outcome"/> -->
                <select
                  [value]="sign.outcome"
                  (change)="putValueOfac(id, $event.target.value, 'outcome', 1)"
                  *ngIf="editsignOfacid === id"
                  class="form-control"
                >
                  <option
                    [selected]="type === sign.outcome"
                    *ngFor="let type of outcomeType"
                    [ngValue]="type"
                  >
                    {{ type }}
                  </option>
                </select>
              </div>
              <div class="form-group col-md-6">
                <label class="font-weight-light w-50"
                  >Transaction ID
                  <span class="float-right" *ngIf="editsignOfacid !== id"
                    >:</span
                  ></label
                >
                <span *ngIf="editsignOfacid !== id" class="ml-2">{{
                  sign.transactionid
                }}</span>
                <input
                  *ngIf="editsignOfacid === id"
                  class="form-control"
                  (keyup)="
                    putValueOfac(id, $event.target.value, 'transactionid', 1)
                  "
                  type="text"
                  [value]="sign.transactionid"
                  placeholder="Enter Transaction ID"
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <form
        class="w-100 mt-4 form-group"
        [formGroup]="form.controls.flags"
        *ngIf="showFlags"
      >
        <div class="addheader h5 pb-2 mt-4">
          Historical Contract Section
          <button
            *ngIf="edit"
            (click)="save()"
            class="float-right primarybtnstyle btn"
          >
            Save
          </button>
        </div>
        <div
          class="row m-0"
          *ngFor="let hclist of historicalContractList; let idx = index"
        >
          <div class="col-md-3">
            {{ hclist.label }}
            <span class="float-right font-weight-light">:</span>
          </div>
          <div class="col-md-3 custom-control custom-switch">
            <input
              type="checkbox"
              (change)="setFlag(hclist.value, true)"
              class="custom-control-input cursor-pointer"
              [name]="hclist.value + '1'"
              [id]="hclist.value + '1'"
              [checked]="returnFlagChecker(hclist.value, true)"
            />
            <label [for]="hclist.value + '1'" class="custom-control-label mr-2"
              >Yes</label
            >
          </div>
          <div class="col-md-3 custom-control custom-switch">
            <input
              type="checkbox"
              (change)="setFlag(hclist.value, false)"
              class="custom-control-input cursor-pointer"
              [name]="hclist.value + '2'"
              [id]="hclist.value + '2'"
              [checked]="returnFlagChecker(hclist.value, false)"
            />
            <label [for]="hclist.value + '2'" class="custom-control-label mr-2"
              >No</label
            >
          </div>
          <div class="col-md-3 custom-control custom-switch">
            <input
              type="checkbox"
              (change)="setFlag(hclist.value, null)"
              class="custom-control-input cursor-pointer"
              [name]="hclist.value + '3'"
              [id]="hclist.value + '3'"
              [checked]="returnFlagChecker(hclist.value, null)"
            />
            <label [for]="hclist.value + '3'" class="custom-control-label mr-2"
              >NA</label
            >
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="text-center" *ngIf="!edit">
    <button
      type="reset"
      (click)="onSubmit(2)"
      class="cancelbtn btn secondarybtnstyle"
    >
      Cancel
    </button>
    <button
      type="submit"
      [disabled]="!form.valid"
      (click)="onSubmit(1)"
      class="btn primarybtnstyle ml-1"
    >
      Save
    </button>
  </div>
</form>
